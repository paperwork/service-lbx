{
  consul: 'localhost:8500',
  jobs: [
    {
      name: 'preStart',
      exec: '/usr/local/bin/containerpilot.sh onStart',
      when: {
        source: 'consul-agent',
        once: 'healthy'
      }
    },
    {
      name: 'service-lbx',
      port: 80,
      exec: [
        'nginx', '-g', 'daemon off;'
      ],
      health: {
        exec: '/usr/local/bin/containerpilot.sh health',
        interval: 10,
        ttl: 25
      },
      when: {
        source: 'preStart',
        once: 'exitSuccess'
      },
      restarts: 'unlimited'
    },
    {
      name: 'consul-agent',
      exec: '/usr/local/bin/containerpilot.sh consul',
      health: {
        exec: 'curl -so /dev/null http://localhost:8500',
        interval: 10,
        ttl: 25
      },
      restarts: 'unlimited'
    },
    {
      name: 'lbx-onchange',
      exec: '/usr/local/bin/containerpilot.sh onChange',
      when: {
        source: 'watch.service-kong',
        once: 'changed'
      }
    }
  ],
  telemetry: {
    port: 9090,
    interfaces: ['eth0', 'eth0[1]', 'lo', 'lo0', 'inet'],
    tags: []
  },
  watches: [
    {
      name: 'service-kong',
      interval: 5
    }
  ]
}
